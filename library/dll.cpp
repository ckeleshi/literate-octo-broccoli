#include "ffo.h"
#include "helper/helper.h"
#include <ShlObj.h>
#include <filesystem>

#define OGL_DISPATCH(func)                                                                                             \
    FARPROC                fn##func;                                                                                   \
    __declspec(naked) void func##_stub()                                                                               \
    {                                                                                                                  \
        __asm jmp fn##func                                                                                             \
    }

OGL_DISPATCH(GlmfBeginGlsBlock)
OGL_DISPATCH(GlmfCloseMetaFile)
OGL_DISPATCH(GlmfEndGlsBlock)
OGL_DISPATCH(GlmfEndPlayback)
OGL_DISPATCH(GlmfInitPlayback)
OGL_DISPATCH(GlmfPlayGlsRecord)
OGL_DISPATCH(glAccum)
OGL_DISPATCH(glAlphaFunc)
OGL_DISPATCH(glAreTexturesResident)
OGL_DISPATCH(glArrayElement)
OGL_DISPATCH(glBegin)
OGL_DISPATCH(glBindTexture)
OGL_DISPATCH(glBitmap)
OGL_DISPATCH(glBlendFunc)
OGL_DISPATCH(glCallList)
OGL_DISPATCH(glCallLists)
OGL_DISPATCH(glClear)
OGL_DISPATCH(glClearAccum)
OGL_DISPATCH(glClearColor)
OGL_DISPATCH(glClearDepth)
OGL_DISPATCH(glClearIndex)
OGL_DISPATCH(glClearStencil)
OGL_DISPATCH(glClipPlane)
OGL_DISPATCH(glColor3b)
OGL_DISPATCH(glColor3bv)
OGL_DISPATCH(glColor3d)
OGL_DISPATCH(glColor3dv)
OGL_DISPATCH(glColor3f)
OGL_DISPATCH(glColor3fv)
OGL_DISPATCH(glColor3i)
OGL_DISPATCH(glColor3iv)
OGL_DISPATCH(glColor3s)
OGL_DISPATCH(glColor3sv)
OGL_DISPATCH(glColor3ub)
OGL_DISPATCH(glColor3ubv)
OGL_DISPATCH(glColor3ui)
OGL_DISPATCH(glColor3uiv)
OGL_DISPATCH(glColor3us)
OGL_DISPATCH(glColor3usv)
OGL_DISPATCH(glColor4b)
OGL_DISPATCH(glColor4bv)
OGL_DISPATCH(glColor4d)
OGL_DISPATCH(glColor4dv)
OGL_DISPATCH(glColor4f)
OGL_DISPATCH(glColor4fv)
OGL_DISPATCH(glColor4i)
OGL_DISPATCH(glColor4iv)
OGL_DISPATCH(glColor4s)
OGL_DISPATCH(glColor4sv)
OGL_DISPATCH(glColor4ub)
OGL_DISPATCH(glColor4ubv)
OGL_DISPATCH(glColor4ui)
OGL_DISPATCH(glColor4uiv)
OGL_DISPATCH(glColor4us)
OGL_DISPATCH(glColor4usv)
OGL_DISPATCH(glColorMask)
OGL_DISPATCH(glColorMaterial)
OGL_DISPATCH(glColorPointer)
OGL_DISPATCH(glCopyPixels)
OGL_DISPATCH(glCopyTexImage1D)
OGL_DISPATCH(glCopyTexImage2D)
OGL_DISPATCH(glCopyTexSubImage1D)
OGL_DISPATCH(glCopyTexSubImage2D)
OGL_DISPATCH(glCullFace)
OGL_DISPATCH(glDebugEntry)
OGL_DISPATCH(glDeleteLists)
OGL_DISPATCH(glDeleteTextures)
OGL_DISPATCH(glDepthFunc)
OGL_DISPATCH(glDepthMask)
OGL_DISPATCH(glDepthRange)
OGL_DISPATCH(glDisable)
OGL_DISPATCH(glDisableClientState)
OGL_DISPATCH(glDrawArrays)
OGL_DISPATCH(glDrawBuffer)
OGL_DISPATCH(glDrawElements)
OGL_DISPATCH(glDrawPixels)
OGL_DISPATCH(glEdgeFlag)
OGL_DISPATCH(glEdgeFlagPointer)
OGL_DISPATCH(glEdgeFlagv)
OGL_DISPATCH(glEnable)
OGL_DISPATCH(glEnableClientState)
OGL_DISPATCH(glEnd)
OGL_DISPATCH(glEndList)
OGL_DISPATCH(glEvalCoord1d)
OGL_DISPATCH(glEvalCoord1dv)
OGL_DISPATCH(glEvalCoord1f)
OGL_DISPATCH(glEvalCoord1fv)
OGL_DISPATCH(glEvalCoord2d)
OGL_DISPATCH(glEvalCoord2dv)
OGL_DISPATCH(glEvalCoord2f)
OGL_DISPATCH(glEvalCoord2fv)
OGL_DISPATCH(glEvalMesh1)
OGL_DISPATCH(glEvalMesh2)
OGL_DISPATCH(glEvalPoint1)
OGL_DISPATCH(glEvalPoint2)
OGL_DISPATCH(glFeedbackBuffer)
OGL_DISPATCH(glFinish)
OGL_DISPATCH(glFlush)
OGL_DISPATCH(glFogf)
OGL_DISPATCH(glFogfv)
OGL_DISPATCH(glFogi)
OGL_DISPATCH(glFogiv)
OGL_DISPATCH(glFrontFace)
OGL_DISPATCH(glFrustum)
OGL_DISPATCH(glGenLists)
OGL_DISPATCH(glGenTextures)
OGL_DISPATCH(glGetBooleanv)
OGL_DISPATCH(glGetClipPlane)
OGL_DISPATCH(glGetDoublev)
OGL_DISPATCH(glGetError)
OGL_DISPATCH(glGetFloatv)
OGL_DISPATCH(glGetIntegerv)
OGL_DISPATCH(glGetLightfv)
OGL_DISPATCH(glGetLightiv)
OGL_DISPATCH(glGetMapdv)
OGL_DISPATCH(glGetMapfv)
OGL_DISPATCH(glGetMapiv)
OGL_DISPATCH(glGetMaterialfv)
OGL_DISPATCH(glGetMaterialiv)
OGL_DISPATCH(glGetPixelMapfv)
OGL_DISPATCH(glGetPixelMapuiv)
OGL_DISPATCH(glGetPixelMapusv)
OGL_DISPATCH(glGetPointerv)
OGL_DISPATCH(glGetPolygonStipple)
OGL_DISPATCH(glGetString)
OGL_DISPATCH(glGetTexEnvfv)
OGL_DISPATCH(glGetTexEnviv)
OGL_DISPATCH(glGetTexGendv)
OGL_DISPATCH(glGetTexGenfv)
OGL_DISPATCH(glGetTexGeniv)
OGL_DISPATCH(glGetTexImage)
OGL_DISPATCH(glGetTexLevelParameterfv)
OGL_DISPATCH(glGetTexLevelParameteriv)
OGL_DISPATCH(glGetTexParameterfv)
OGL_DISPATCH(glGetTexParameteriv)
OGL_DISPATCH(glHint)
OGL_DISPATCH(glIndexMask)
OGL_DISPATCH(glIndexPointer)
OGL_DISPATCH(glIndexd)
OGL_DISPATCH(glIndexdv)
OGL_DISPATCH(glIndexf)
OGL_DISPATCH(glIndexfv)
OGL_DISPATCH(glIndexi)
OGL_DISPATCH(glIndexiv)
OGL_DISPATCH(glIndexs)
OGL_DISPATCH(glIndexsv)
OGL_DISPATCH(glIndexub)
OGL_DISPATCH(glIndexubv)
OGL_DISPATCH(glInitNames)
OGL_DISPATCH(glInterleavedArrays)
OGL_DISPATCH(glIsEnabled)
OGL_DISPATCH(glIsList)
OGL_DISPATCH(glIsTexture)
OGL_DISPATCH(glLightModelf)
OGL_DISPATCH(glLightModelfv)
OGL_DISPATCH(glLightModeli)
OGL_DISPATCH(glLightModeliv)
OGL_DISPATCH(glLightf)
OGL_DISPATCH(glLightfv)
OGL_DISPATCH(glLighti)
OGL_DISPATCH(glLightiv)
OGL_DISPATCH(glLineStipple)
OGL_DISPATCH(glLineWidth)
OGL_DISPATCH(glListBase)
OGL_DISPATCH(glLoadIdentity)
OGL_DISPATCH(glLoadMatrixd)
OGL_DISPATCH(glLoadMatrixf)
OGL_DISPATCH(glLoadName)
OGL_DISPATCH(glLogicOp)
OGL_DISPATCH(glMap1d)
OGL_DISPATCH(glMap1f)
OGL_DISPATCH(glMap2d)
OGL_DISPATCH(glMap2f)
OGL_DISPATCH(glMapGrid1d)
OGL_DISPATCH(glMapGrid1f)
OGL_DISPATCH(glMapGrid2d)
OGL_DISPATCH(glMapGrid2f)
OGL_DISPATCH(glMaterialf)
OGL_DISPATCH(glMaterialfv)
OGL_DISPATCH(glMateriali)
OGL_DISPATCH(glMaterialiv)
OGL_DISPATCH(glMatrixMode)
OGL_DISPATCH(glMultMatrixd)
OGL_DISPATCH(glMultMatrixf)
OGL_DISPATCH(glNewList)
OGL_DISPATCH(glNormal3b)
OGL_DISPATCH(glNormal3bv)
OGL_DISPATCH(glNormal3d)
OGL_DISPATCH(glNormal3dv)
OGL_DISPATCH(glNormal3f)
OGL_DISPATCH(glNormal3fv)
OGL_DISPATCH(glNormal3i)
OGL_DISPATCH(glNormal3iv)
OGL_DISPATCH(glNormal3s)
OGL_DISPATCH(glNormal3sv)
OGL_DISPATCH(glNormalPointer)
OGL_DISPATCH(glOrtho)
OGL_DISPATCH(glPassThrough)
OGL_DISPATCH(glPixelMapfv)
OGL_DISPATCH(glPixelMapuiv)
OGL_DISPATCH(glPixelMapusv)
OGL_DISPATCH(glPixelStoref)
OGL_DISPATCH(glPixelStorei)
OGL_DISPATCH(glPixelTransferf)
OGL_DISPATCH(glPixelTransferi)
OGL_DISPATCH(glPixelZoom)
OGL_DISPATCH(glPointSize)
OGL_DISPATCH(glPolygonMode)
OGL_DISPATCH(glPolygonOffset)
OGL_DISPATCH(glPolygonStipple)
OGL_DISPATCH(glPopAttrib)
OGL_DISPATCH(glPopClientAttrib)
OGL_DISPATCH(glPopMatrix)
OGL_DISPATCH(glPopName)
OGL_DISPATCH(glPrioritizeTextures)
OGL_DISPATCH(glPushAttrib)
OGL_DISPATCH(glPushClientAttrib)
OGL_DISPATCH(glPushMatrix)
OGL_DISPATCH(glPushName)
OGL_DISPATCH(glRasterPos2d)
OGL_DISPATCH(glRasterPos2dv)
OGL_DISPATCH(glRasterPos2f)
OGL_DISPATCH(glRasterPos2fv)
OGL_DISPATCH(glRasterPos2i)
OGL_DISPATCH(glRasterPos2iv)
OGL_DISPATCH(glRasterPos2s)
OGL_DISPATCH(glRasterPos2sv)
OGL_DISPATCH(glRasterPos3d)
OGL_DISPATCH(glRasterPos3dv)
OGL_DISPATCH(glRasterPos3f)
OGL_DISPATCH(glRasterPos3fv)
OGL_DISPATCH(glRasterPos3i)
OGL_DISPATCH(glRasterPos3iv)
OGL_DISPATCH(glRasterPos3s)
OGL_DISPATCH(glRasterPos3sv)
OGL_DISPATCH(glRasterPos4d)
OGL_DISPATCH(glRasterPos4dv)
OGL_DISPATCH(glRasterPos4f)
OGL_DISPATCH(glRasterPos4fv)
OGL_DISPATCH(glRasterPos4i)
OGL_DISPATCH(glRasterPos4iv)
OGL_DISPATCH(glRasterPos4s)
OGL_DISPATCH(glRasterPos4sv)
OGL_DISPATCH(glReadBuffer)
OGL_DISPATCH(glReadPixels)
OGL_DISPATCH(glRectd)
OGL_DISPATCH(glRectdv)
OGL_DISPATCH(glRectf)
OGL_DISPATCH(glRectfv)
OGL_DISPATCH(glRecti)
OGL_DISPATCH(glRectiv)
OGL_DISPATCH(glRects)
OGL_DISPATCH(glRectsv)
OGL_DISPATCH(glRenderMode)
OGL_DISPATCH(glRotated)
OGL_DISPATCH(glRotatef)
OGL_DISPATCH(glScaled)
OGL_DISPATCH(glScalef)
OGL_DISPATCH(glScissor)
OGL_DISPATCH(glSelectBuffer)
OGL_DISPATCH(glShadeModel)
OGL_DISPATCH(glStencilFunc)
OGL_DISPATCH(glStencilMask)
OGL_DISPATCH(glStencilOp)
OGL_DISPATCH(glTexCoord1d)
OGL_DISPATCH(glTexCoord1dv)
OGL_DISPATCH(glTexCoord1f)
OGL_DISPATCH(glTexCoord1fv)
OGL_DISPATCH(glTexCoord1i)
OGL_DISPATCH(glTexCoord1iv)
OGL_DISPATCH(glTexCoord1s)
OGL_DISPATCH(glTexCoord1sv)
OGL_DISPATCH(glTexCoord2d)
OGL_DISPATCH(glTexCoord2dv)
OGL_DISPATCH(glTexCoord2f)
OGL_DISPATCH(glTexCoord2fv)
OGL_DISPATCH(glTexCoord2i)
OGL_DISPATCH(glTexCoord2iv)
OGL_DISPATCH(glTexCoord2s)
OGL_DISPATCH(glTexCoord2sv)
OGL_DISPATCH(glTexCoord3d)
OGL_DISPATCH(glTexCoord3dv)
OGL_DISPATCH(glTexCoord3f)
OGL_DISPATCH(glTexCoord3fv)
OGL_DISPATCH(glTexCoord3i)
OGL_DISPATCH(glTexCoord3iv)
OGL_DISPATCH(glTexCoord3s)
OGL_DISPATCH(glTexCoord3sv)
OGL_DISPATCH(glTexCoord4d)
OGL_DISPATCH(glTexCoord4dv)
OGL_DISPATCH(glTexCoord4f)
OGL_DISPATCH(glTexCoord4fv)
OGL_DISPATCH(glTexCoord4i)
OGL_DISPATCH(glTexCoord4iv)
OGL_DISPATCH(glTexCoord4s)
OGL_DISPATCH(glTexCoord4sv)
OGL_DISPATCH(glTexCoordPointer)
OGL_DISPATCH(glTexEnvf)
OGL_DISPATCH(glTexEnvfv)
OGL_DISPATCH(glTexEnvi)
OGL_DISPATCH(glTexEnviv)
OGL_DISPATCH(glTexGend)
OGL_DISPATCH(glTexGendv)
OGL_DISPATCH(glTexGenf)
OGL_DISPATCH(glTexGenfv)
OGL_DISPATCH(glTexGeni)
OGL_DISPATCH(glTexGeniv)
OGL_DISPATCH(glTexImage1D)
OGL_DISPATCH(glTexImage2D)
OGL_DISPATCH(glTexParameterf)
OGL_DISPATCH(glTexParameterfv)
OGL_DISPATCH(glTexParameteri)
OGL_DISPATCH(glTexParameteriv)
OGL_DISPATCH(glTexSubImage1D)
OGL_DISPATCH(glTexSubImage2D)
OGL_DISPATCH(glTranslated)
OGL_DISPATCH(glTranslatef)
OGL_DISPATCH(glVertex2d)
OGL_DISPATCH(glVertex2dv)
OGL_DISPATCH(glVertex2f)
OGL_DISPATCH(glVertex2fv)
OGL_DISPATCH(glVertex2i)
OGL_DISPATCH(glVertex2iv)
OGL_DISPATCH(glVertex2s)
OGL_DISPATCH(glVertex2sv)
OGL_DISPATCH(glVertex3d)
OGL_DISPATCH(glVertex3dv)
OGL_DISPATCH(glVertex3f)
OGL_DISPATCH(glVertex3fv)
OGL_DISPATCH(glVertex3i)
OGL_DISPATCH(glVertex3iv)
OGL_DISPATCH(glVertex3s)
OGL_DISPATCH(glVertex3sv)
OGL_DISPATCH(glVertex4d)
OGL_DISPATCH(glVertex4dv)
OGL_DISPATCH(glVertex4f)
OGL_DISPATCH(glVertex4fv)
OGL_DISPATCH(glVertex4i)
OGL_DISPATCH(glVertex4iv)
OGL_DISPATCH(glVertex4s)
OGL_DISPATCH(glVertex4sv)
OGL_DISPATCH(glVertexPointer)
OGL_DISPATCH(glViewport)
OGL_DISPATCH(wglChoosePixelFormat)
OGL_DISPATCH(wglCopyContext)
OGL_DISPATCH(wglCreateContext)
OGL_DISPATCH(wglCreateLayerContext)
OGL_DISPATCH(wglDeleteContext)
OGL_DISPATCH(wglDescribeLayerPlane)
OGL_DISPATCH(wglDescribePixelFormat)
OGL_DISPATCH(wglGetCurrentContext)
OGL_DISPATCH(wglGetCurrentDC)
OGL_DISPATCH(wglGetDefaultProcAddress)
OGL_DISPATCH(wglGetLayerPaletteEntries)
OGL_DISPATCH(wglGetPixelFormat)
OGL_DISPATCH(wglGetProcAddress)
OGL_DISPATCH(wglMakeCurrent)
OGL_DISPATCH(wglRealizeLayerPalette)
OGL_DISPATCH(wglSetLayerPaletteEntries)
OGL_DISPATCH(wglSetPixelFormat)
OGL_DISPATCH(wglShareLists)
OGL_DISPATCH(wglSwapBuffers)
OGL_DISPATCH(wglSwapLayerBuffers)
OGL_DISPATCH(wglSwapMultipleBuffers)
OGL_DISPATCH(wglUseFontBitmapsA)
OGL_DISPATCH(wglUseFontBitmapsW)
OGL_DISPATCH(wglUseFontOutlinesA)
OGL_DISPATCH(wglUseFontOutlinesW)

static HMODULE LoadSystemLibrary(std::wstring_view filename)
{
    wchar_t *szSystemPath = nullptr;

    SHGetKnownFolderPath(FOLDERID_System, 0, nullptr, &szSystemPath);

    std::filesystem::path path = szSystemPath;

    CoTaskMemFree(szSystemPath);

    return LoadLibraryW((path / filename).c_str());
}

#define FIND_OGL(func) fn##func = GetProcAddress(ogl_module, #func);

static void LoadOpenGL32()
{
    auto ogl_module = LoadSystemLibrary(L"opengl32.dll");

    FIND_OGL(GlmfBeginGlsBlock)
    FIND_OGL(GlmfCloseMetaFile)
    FIND_OGL(GlmfEndGlsBlock)
    FIND_OGL(GlmfEndPlayback)
    FIND_OGL(GlmfInitPlayback)
    FIND_OGL(GlmfPlayGlsRecord)
    FIND_OGL(glAccum)
    FIND_OGL(glAlphaFunc)
    FIND_OGL(glAreTexturesResident)
    FIND_OGL(glArrayElement)
    FIND_OGL(glBegin)
    FIND_OGL(glBindTexture)
    FIND_OGL(glBitmap)
    FIND_OGL(glBlendFunc)
    FIND_OGL(glCallList)
    FIND_OGL(glCallLists)
    FIND_OGL(glClear)
    FIND_OGL(glClearAccum)
    FIND_OGL(glClearColor)
    FIND_OGL(glClearDepth)
    FIND_OGL(glClearIndex)
    FIND_OGL(glClearStencil)
    FIND_OGL(glClipPlane)
    FIND_OGL(glColor3b)
    FIND_OGL(glColor3bv)
    FIND_OGL(glColor3d)
    FIND_OGL(glColor3dv)
    FIND_OGL(glColor3f)
    FIND_OGL(glColor3fv)
    FIND_OGL(glColor3i)
    FIND_OGL(glColor3iv)
    FIND_OGL(glColor3s)
    FIND_OGL(glColor3sv)
    FIND_OGL(glColor3ub)
    FIND_OGL(glColor3ubv)
    FIND_OGL(glColor3ui)
    FIND_OGL(glColor3uiv)
    FIND_OGL(glColor3us)
    FIND_OGL(glColor3usv)
    FIND_OGL(glColor4b)
    FIND_OGL(glColor4bv)
    FIND_OGL(glColor4d)
    FIND_OGL(glColor4dv)
    FIND_OGL(glColor4f)
    FIND_OGL(glColor4fv)
    FIND_OGL(glColor4i)
    FIND_OGL(glColor4iv)
    FIND_OGL(glColor4s)
    FIND_OGL(glColor4sv)
    FIND_OGL(glColor4ub)
    FIND_OGL(glColor4ubv)
    FIND_OGL(glColor4ui)
    FIND_OGL(glColor4uiv)
    FIND_OGL(glColor4us)
    FIND_OGL(glColor4usv)
    FIND_OGL(glColorMask)
    FIND_OGL(glColorMaterial)
    FIND_OGL(glColorPointer)
    FIND_OGL(glCopyPixels)
    FIND_OGL(glCopyTexImage1D)
    FIND_OGL(glCopyTexImage2D)
    FIND_OGL(glCopyTexSubImage1D)
    FIND_OGL(glCopyTexSubImage2D)
    FIND_OGL(glCullFace)
    FIND_OGL(glDebugEntry)
    FIND_OGL(glDeleteLists)
    FIND_OGL(glDeleteTextures)
    FIND_OGL(glDepthFunc)
    FIND_OGL(glDepthMask)
    FIND_OGL(glDepthRange)
    FIND_OGL(glDisable)
    FIND_OGL(glDisableClientState)
    FIND_OGL(glDrawArrays)
    FIND_OGL(glDrawBuffer)
    FIND_OGL(glDrawElements)
    FIND_OGL(glDrawPixels)
    FIND_OGL(glEdgeFlag)
    FIND_OGL(glEdgeFlagPointer)
    FIND_OGL(glEdgeFlagv)
    FIND_OGL(glEnable)
    FIND_OGL(glEnableClientState)
    FIND_OGL(glEnd)
    FIND_OGL(glEndList)
    FIND_OGL(glEvalCoord1d)
    FIND_OGL(glEvalCoord1dv)
    FIND_OGL(glEvalCoord1f)
    FIND_OGL(glEvalCoord1fv)
    FIND_OGL(glEvalCoord2d)
    FIND_OGL(glEvalCoord2dv)
    FIND_OGL(glEvalCoord2f)
    FIND_OGL(glEvalCoord2fv)
    FIND_OGL(glEvalMesh1)
    FIND_OGL(glEvalMesh2)
    FIND_OGL(glEvalPoint1)
    FIND_OGL(glEvalPoint2)
    FIND_OGL(glFeedbackBuffer)
    FIND_OGL(glFinish)
    FIND_OGL(glFlush)
    FIND_OGL(glFogf)
    FIND_OGL(glFogfv)
    FIND_OGL(glFogi)
    FIND_OGL(glFogiv)
    FIND_OGL(glFrontFace)
    FIND_OGL(glFrustum)
    FIND_OGL(glGenLists)
    FIND_OGL(glGenTextures)
    FIND_OGL(glGetBooleanv)
    FIND_OGL(glGetClipPlane)
    FIND_OGL(glGetDoublev)
    FIND_OGL(glGetError)
    FIND_OGL(glGetFloatv)
    FIND_OGL(glGetIntegerv)
    FIND_OGL(glGetLightfv)
    FIND_OGL(glGetLightiv)
    FIND_OGL(glGetMapdv)
    FIND_OGL(glGetMapfv)
    FIND_OGL(glGetMapiv)
    FIND_OGL(glGetMaterialfv)
    FIND_OGL(glGetMaterialiv)
    FIND_OGL(glGetPixelMapfv)
    FIND_OGL(glGetPixelMapuiv)
    FIND_OGL(glGetPixelMapusv)
    FIND_OGL(glGetPointerv)
    FIND_OGL(glGetPolygonStipple)
    FIND_OGL(glGetString)
    FIND_OGL(glGetTexEnvfv)
    FIND_OGL(glGetTexEnviv)
    FIND_OGL(glGetTexGendv)
    FIND_OGL(glGetTexGenfv)
    FIND_OGL(glGetTexGeniv)
    FIND_OGL(glGetTexImage)
    FIND_OGL(glGetTexLevelParameterfv)
    FIND_OGL(glGetTexLevelParameteriv)
    FIND_OGL(glGetTexParameterfv)
    FIND_OGL(glGetTexParameteriv)
    FIND_OGL(glHint)
    FIND_OGL(glIndexMask)
    FIND_OGL(glIndexPointer)
    FIND_OGL(glIndexd)
    FIND_OGL(glIndexdv)
    FIND_OGL(glIndexf)
    FIND_OGL(glIndexfv)
    FIND_OGL(glIndexi)
    FIND_OGL(glIndexiv)
    FIND_OGL(glIndexs)
    FIND_OGL(glIndexsv)
    FIND_OGL(glIndexub)
    FIND_OGL(glIndexubv)
    FIND_OGL(glInitNames)
    FIND_OGL(glInterleavedArrays)
    FIND_OGL(glIsEnabled)
    FIND_OGL(glIsList)
    FIND_OGL(glIsTexture)
    FIND_OGL(glLightModelf)
    FIND_OGL(glLightModelfv)
    FIND_OGL(glLightModeli)
    FIND_OGL(glLightModeliv)
    FIND_OGL(glLightf)
    FIND_OGL(glLightfv)
    FIND_OGL(glLighti)
    FIND_OGL(glLightiv)
    FIND_OGL(glLineStipple)
    FIND_OGL(glLineWidth)
    FIND_OGL(glListBase)
    FIND_OGL(glLoadIdentity)
    FIND_OGL(glLoadMatrixd)
    FIND_OGL(glLoadMatrixf)
    FIND_OGL(glLoadName)
    FIND_OGL(glLogicOp)
    FIND_OGL(glMap1d)
    FIND_OGL(glMap1f)
    FIND_OGL(glMap2d)
    FIND_OGL(glMap2f)
    FIND_OGL(glMapGrid1d)
    FIND_OGL(glMapGrid1f)
    FIND_OGL(glMapGrid2d)
    FIND_OGL(glMapGrid2f)
    FIND_OGL(glMaterialf)
    FIND_OGL(glMaterialfv)
    FIND_OGL(glMateriali)
    FIND_OGL(glMaterialiv)
    FIND_OGL(glMatrixMode)
    FIND_OGL(glMultMatrixd)
    FIND_OGL(glMultMatrixf)
    FIND_OGL(glNewList)
    FIND_OGL(glNormal3b)
    FIND_OGL(glNormal3bv)
    FIND_OGL(glNormal3d)
    FIND_OGL(glNormal3dv)
    FIND_OGL(glNormal3f)
    FIND_OGL(glNormal3fv)
    FIND_OGL(glNormal3i)
    FIND_OGL(glNormal3iv)
    FIND_OGL(glNormal3s)
    FIND_OGL(glNormal3sv)
    FIND_OGL(glNormalPointer)
    FIND_OGL(glOrtho)
    FIND_OGL(glPassThrough)
    FIND_OGL(glPixelMapfv)
    FIND_OGL(glPixelMapuiv)
    FIND_OGL(glPixelMapusv)
    FIND_OGL(glPixelStoref)
    FIND_OGL(glPixelStorei)
    FIND_OGL(glPixelTransferf)
    FIND_OGL(glPixelTransferi)
    FIND_OGL(glPixelZoom)
    FIND_OGL(glPointSize)
    FIND_OGL(glPolygonMode)
    FIND_OGL(glPolygonOffset)
    FIND_OGL(glPolygonStipple)
    FIND_OGL(glPopAttrib)
    FIND_OGL(glPopClientAttrib)
    FIND_OGL(glPopMatrix)
    FIND_OGL(glPopName)
    FIND_OGL(glPrioritizeTextures)
    FIND_OGL(glPushAttrib)
    FIND_OGL(glPushClientAttrib)
    FIND_OGL(glPushMatrix)
    FIND_OGL(glPushName)
    FIND_OGL(glRasterPos2d)
    FIND_OGL(glRasterPos2dv)
    FIND_OGL(glRasterPos2f)
    FIND_OGL(glRasterPos2fv)
    FIND_OGL(glRasterPos2i)
    FIND_OGL(glRasterPos2iv)
    FIND_OGL(glRasterPos2s)
    FIND_OGL(glRasterPos2sv)
    FIND_OGL(glRasterPos3d)
    FIND_OGL(glRasterPos3dv)
    FIND_OGL(glRasterPos3f)
    FIND_OGL(glRasterPos3fv)
    FIND_OGL(glRasterPos3i)
    FIND_OGL(glRasterPos3iv)
    FIND_OGL(glRasterPos3s)
    FIND_OGL(glRasterPos3sv)
    FIND_OGL(glRasterPos4d)
    FIND_OGL(glRasterPos4dv)
    FIND_OGL(glRasterPos4f)
    FIND_OGL(glRasterPos4fv)
    FIND_OGL(glRasterPos4i)
    FIND_OGL(glRasterPos4iv)
    FIND_OGL(glRasterPos4s)
    FIND_OGL(glRasterPos4sv)
    FIND_OGL(glReadBuffer)
    FIND_OGL(glReadPixels)
    FIND_OGL(glRectd)
    FIND_OGL(glRectdv)
    FIND_OGL(glRectf)
    FIND_OGL(glRectfv)
    FIND_OGL(glRecti)
    FIND_OGL(glRectiv)
    FIND_OGL(glRects)
    FIND_OGL(glRectsv)
    FIND_OGL(glRenderMode)
    FIND_OGL(glRotated)
    FIND_OGL(glRotatef)
    FIND_OGL(glScaled)
    FIND_OGL(glScalef)
    FIND_OGL(glScissor)
    FIND_OGL(glSelectBuffer)
    FIND_OGL(glShadeModel)
    FIND_OGL(glStencilFunc)
    FIND_OGL(glStencilMask)
    FIND_OGL(glStencilOp)
    FIND_OGL(glTexCoord1d)
    FIND_OGL(glTexCoord1dv)
    FIND_OGL(glTexCoord1f)
    FIND_OGL(glTexCoord1fv)
    FIND_OGL(glTexCoord1i)
    FIND_OGL(glTexCoord1iv)
    FIND_OGL(glTexCoord1s)
    FIND_OGL(glTexCoord1sv)
    FIND_OGL(glTexCoord2d)
    FIND_OGL(glTexCoord2dv)
    FIND_OGL(glTexCoord2f)
    FIND_OGL(glTexCoord2fv)
    FIND_OGL(glTexCoord2i)
    FIND_OGL(glTexCoord2iv)
    FIND_OGL(glTexCoord2s)
    FIND_OGL(glTexCoord2sv)
    FIND_OGL(glTexCoord3d)
    FIND_OGL(glTexCoord3dv)
    FIND_OGL(glTexCoord3f)
    FIND_OGL(glTexCoord3fv)
    FIND_OGL(glTexCoord3i)
    FIND_OGL(glTexCoord3iv)
    FIND_OGL(glTexCoord3s)
    FIND_OGL(glTexCoord3sv)
    FIND_OGL(glTexCoord4d)
    FIND_OGL(glTexCoord4dv)
    FIND_OGL(glTexCoord4f)
    FIND_OGL(glTexCoord4fv)
    FIND_OGL(glTexCoord4i)
    FIND_OGL(glTexCoord4iv)
    FIND_OGL(glTexCoord4s)
    FIND_OGL(glTexCoord4sv)
    FIND_OGL(glTexCoordPointer)
    FIND_OGL(glTexEnvf)
    FIND_OGL(glTexEnvfv)
    FIND_OGL(glTexEnvi)
    FIND_OGL(glTexEnviv)
    FIND_OGL(glTexGend)
    FIND_OGL(glTexGendv)
    FIND_OGL(glTexGenf)
    FIND_OGL(glTexGenfv)
    FIND_OGL(glTexGeni)
    FIND_OGL(glTexGeniv)
    FIND_OGL(glTexImage1D)
    FIND_OGL(glTexImage2D)
    FIND_OGL(glTexParameterf)
    FIND_OGL(glTexParameterfv)
    FIND_OGL(glTexParameteri)
    FIND_OGL(glTexParameteriv)
    FIND_OGL(glTexSubImage1D)
    FIND_OGL(glTexSubImage2D)
    FIND_OGL(glTranslated)
    FIND_OGL(glTranslatef)
    FIND_OGL(glVertex2d)
    FIND_OGL(glVertex2dv)
    FIND_OGL(glVertex2f)
    FIND_OGL(glVertex2fv)
    FIND_OGL(glVertex2i)
    FIND_OGL(glVertex2iv)
    FIND_OGL(glVertex2s)
    FIND_OGL(glVertex2sv)
    FIND_OGL(glVertex3d)
    FIND_OGL(glVertex3dv)
    FIND_OGL(glVertex3f)
    FIND_OGL(glVertex3fv)
    FIND_OGL(glVertex3i)
    FIND_OGL(glVertex3iv)
    FIND_OGL(glVertex3s)
    FIND_OGL(glVertex3sv)
    FIND_OGL(glVertex4d)
    FIND_OGL(glVertex4dv)
    FIND_OGL(glVertex4f)
    FIND_OGL(glVertex4fv)
    FIND_OGL(glVertex4i)
    FIND_OGL(glVertex4iv)
    FIND_OGL(glVertex4s)
    FIND_OGL(glVertex4sv)
    FIND_OGL(glVertexPointer)
    FIND_OGL(glViewport)
    FIND_OGL(wglChoosePixelFormat)
    FIND_OGL(wglCopyContext)
    FIND_OGL(wglCreateContext)
    FIND_OGL(wglCreateLayerContext)
    FIND_OGL(wglDeleteContext)
    FIND_OGL(wglDescribeLayerPlane)
    FIND_OGL(wglDescribePixelFormat)
    FIND_OGL(wglGetCurrentContext)
    FIND_OGL(wglGetCurrentDC)
    FIND_OGL(wglGetDefaultProcAddress)
    FIND_OGL(wglGetLayerPaletteEntries)
    FIND_OGL(wglGetPixelFormat)
    FIND_OGL(wglGetProcAddress)
    FIND_OGL(wglMakeCurrent)
    FIND_OGL(wglRealizeLayerPalette)
    FIND_OGL(wglSetLayerPaletteEntries)
    FIND_OGL(wglSetPixelFormat)
    FIND_OGL(wglShareLists)
    FIND_OGL(wglSwapBuffers)
    FIND_OGL(wglSwapLayerBuffers)
    FIND_OGL(wglSwapMultipleBuffers)
    FIND_OGL(wglUseFontBitmapsA)
    FIND_OGL(wglUseFontBitmapsW)
    FIND_OGL(wglUseFontOutlinesA)
    FIND_OGL(wglUseFontOutlinesW)
}

BOOL APIENTRY DllMain(HMODULE hModule, DWORD ul_reason_for_call, LPVOID lpReserved)
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH: {
        LoadOpenGL32();
        inject_game();
        helper_instance.patch();
        helper_instance.begin_helper();
        break;
    }

    case DLL_PROCESS_DETACH: {
        helper_instance.end_helper();
        break;
    }

    default:
        break;
    }

    return TRUE;
}
